<!DOCTYPE html>
<html lang="en">
  <head>
    <meta charset="UTF-8" />
    <meta name="viewport" content="width=device-width,initial-scale=1" />
    <title>Smoke Timer</title>

    <link rel="manifest" href="manifest.json" />

    <link
      rel="stylesheet"
      href="https://cdn.jsdelivr.net/npm/bootstrap-icons@1.11.3/font/bootstrap-icons.css"
    />

    <meta name="apple-mobile-web-app-capable" content="yes" />
    <meta name="apple-mobile-web-app-title" content="Smoke Timer" />
    <link
      rel="apple-touch-icon"
      href="https://cdn.jsdelivr.net/gh/twitter/twemoji@14.0.2/assets/72x72/1f6ac.png"
    />

    <script src="https://accounts.google.com/gsi/client" async defer></script>
    <script src="https://apis.google.com/js/api.js"></script>

    <link rel="stylesheet" href="style.css" />
  </head>

  <body>
    <div style="text-align: center; padding: 16px 10px">
      <div style="font-size: 1.6rem; font-weight: 700; opacity: 0.95">
        Smoke Less, Live More
      </div>
      <div style="opacity: 0.7; margin-top: 4px; font-size: 0.9rem">
        â€œOne hour at a time. Small wins add up.â€
      </div>
    </div>

    <div
      style="
        margin: 10px auto 6px;
        max-width: 520px;
        font-size: 0.85rem;
        opacity: 0.85;
        background: #111;
        border: 1px solid rgba(255, 255, 255, 0.12);
        border-radius: 12px;
        padding: 10px 12px;
      "
    >
      This isnâ€™t about smoking more â€œsafelyâ€. Itâ€™s about building control â€”
      stretching the gap, skipping when you can, and reducing step-by-step. I
      built this for myself firstâ€¦ and for anyone else trying to slowly take
      their life back. No pressure â€” just progress â¤ï¸
    </div>

    <div class="shell">
      <div class="card">
        <h1>Smoke Timer</h1>
        <div class="sub">One cigarette per cooldown</div>

        <div id="since" class="info"></div>

        <div class="circle">
          <svg>
            <circle class="bg" cx="95" cy="95" r="80"></circle>
            <circle id="ring" class="fg" cx="95" cy="95" r="80"></circle>
          </svg>
          <div id="time" class="timerText">00:00</div>
        </div>

        <button id="start" class="btn primary">Start</button>
        <button id="pause" class="btn secondary" style="display: none">
          Pause
        </button>
        <button id="reset" class="btn danger">Reset</button>

        <div id="presets" class="pills"></div>
        <div id="status" class="info"></div>

        <button
          id="skip"
          class="btn"
          style="margin-top: 6px; background: #1f2937; color: #fff"
        >
          ğŸ‘ Skip this cigarette
        </button>

        <div class="sectionTitle">Today</div>
        <div class="metricBox">
          <div class="metric">
            <span>Cigarettes</span><span id="today"></span>
          </div>
          <div class="barWrap"><div id="limitBar" class="bar"></div></div>
          <div id="limitBadge" class="badge good">Under limit</div>
          <div class="funCard">ğŸš¬ <span id="moneyToday"></span></div>
          <div class="funCard">â¤ï¸ <span id="lifeToday"></span></div>
          <div class="funCard">ğŸ‘Ÿ <span id="stepsToday"></span></div>
          <div class="funCard">â³ <span id="timeSaved"></span></div>
          <div class="funCard">ğŸ‘ <span id="skipsCount"></span></div>
        </div>

        <div class="sectionTitle">Progress</div>
        <div class="metricBox">
          <div class="metric"><span>Streak</span><span id="streak"></span></div>
          <div class="canvasWrap">
            <canvas id="chart"></canvas>
            <div class="sub">Last 7 days</div>
          </div>
          <div class="sub" id="recent"></div>
        </div>

        <div class="funCard">
          ğŸ Longest cooldown: <span id="bestGap"></span>
        </div>

        <div class="sectionTitle">Insights</div>
        <div class="metricBox" id="insights"></div>

        <div class="sectionTitle">Achievements</div>
        <div class="metricBox" id="achievements"></div>

        <div class="sectionTitle">Settings</div>
        <div class="metricBox">
          <div class="row">
            <span>Daily limit</span><input id="limit" type="number" min="1" />
          </div>

          <div class="row">
            <span>Silent mode</span
            ><input id="silent" type="checkbox" class="toggle" />
          </div>

          <div class="row">
            <span>Reminder (10am)</span>
            <input id="reminder" type="checkbox" class="toggle" />
          </div>

          <div class="row">
            <span>Sound</span>
            <select id="soundSel">
              <option value="ding">Ding</option>
              <option value="soft">Soft</option>
              <option value="off">Off</option>
            </select>
          </div>

          <div class="row">
            <span>Currency</span>
            <select id="currency">
              <option value="â‚¹">â‚¹</option>
              <option value="$">$</option>
              <option value="â‚¬">â‚¬</option>
            </select>
          </div>

          <div class="row">
            <span>Price per pack</span
            ><input id="price" type="number" min="1" />
          </div>
          <div class="row">
            <span>Cigs per pack</span
            ><input id="perpack" type="number" min="1" />
          </div>
          <div class="row">
            <span>Add preset (min)</span
            ><input id="addPreset" type="number" min="1" />
          </div>

          <div class="row">
            <span>Night mode</span
            ><input id="manualNight" type="checkbox" class="toggle" />
          </div>

          <div class="row">
            <span>Backup data</span
            ><input id="file" type="file" accept="application/json" />
          </div>

          <button id="export" class="btn secondary">Export</button>

          <button id="driveLogin" class="btn secondary">
            Sign in with Google
          </button>
          <button id="driveBackup" class="btn">Backup to Drive</button>
          <button id="driveRestore" class="btn">Restore from Drive</button>

          <button id="undo" class="btn">Undo last log</button>

          <button id="clearToday" class="btn danger">
            <i class="bi bi-trash"></i> Clear today
          </button>
          <button id="clearAll" class="btn danger">
            <i class="bi bi-trash"></i> Clear all history
          </button>
        </div>

        <div class="sub" style="margin-top: 6px">
          Not medical advice â€” just fun estimates.
        </div>
      </div>
    </div>

    <div id="toast" class="toast"></div>

    <audio id="ding">
      <source src="data:audio/mp3;base64,//uQxA..." type="audio/mp3" />
    </audio>

    <script src="app.js"></script>
  </body>
</html>
